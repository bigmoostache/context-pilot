<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Configuration — Context Pilot Docs</title>
    <meta name="description" content="Configure Context Pilot: LLM providers, API keys, themes, and runtime settings.">
    <link rel="stylesheet" href="docs.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600;700&family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
</head>
<body>
    <header class="docs-header">
        <div class="docs-header-inner">
            <div style="display:flex;align-items:center;gap:1rem;">
                <button class="docs-mobile-toggle" onclick="toggleSidebar()">☰</button>
                <a href="../index.html" class="docs-logo">
                    <span class="docs-logo-icon">⎈</span>
                    <span>Context Pilot</span>
                    <span class="docs-logo-sep">/</span>
                    <span class="docs-logo-docs">Docs</span>
                </a>
            </div>
            <div class="docs-header-links">
                <a href="../index.html">Home</a>
                <a href="https://github.com/bigmoostache/context-pilot">GitHub</a>
            </div>
        </div>
    </header>

    <div class="docs-overlay" onclick="toggleSidebar()"></div>

    <div class="docs-layout">
        <nav class="docs-sidebar">
            <div class="sidebar-section">
                <div class="sidebar-section-title">Getting Started</div>
                <a href="index.html" class="sidebar-link">Overview</a>
            </div>
            <div class="sidebar-section">
                <div class="sidebar-section-title">Core</div>
                <a href="context.html" class="sidebar-link">Context System</a>
                <a href="modules.html" class="sidebar-link">Modules</a>
                <a href="tools.html" class="sidebar-link">Tool Reference</a>
            </div>
            <div class="sidebar-section">
                <div class="sidebar-section-title">Customization</div>
                <a href="agents.html" class="sidebar-link">Agents & Skills</a>
                <a href="configuration.html" class="sidebar-link active">Configuration</a>
                <a href="configuration.html#providers" class="sidebar-link sub">LLM Providers</a>
                <a href="configuration.html#env" class="sidebar-link sub">Environment Variables</a>
                <a href="configuration.html#runtime" class="sidebar-link sub">Runtime Config</a>
                <a href="configuration.html#themes" class="sidebar-link sub">Themes</a>
                <a href="configuration.html#persistence" class="sidebar-link sub">Persistence</a>
                <a href="keyboard.html" class="sidebar-link">Keyboard Shortcuts</a>
            </div>
            <div class="sidebar-section">
                <div class="sidebar-section-title">Advanced</div>
                <a href="advanced.html" class="sidebar-link">Autonomous Mode</a>
            </div>
        </nav>

        <main class="docs-content">
            <h1><span class="gradient-text">Configuration</span></h1>
            <p class="page-subtitle">LLM providers, API keys, themes, and runtime settings.</p>

            <h2 id="providers">LLM Providers</h2>
            <p>Context Pilot supports multiple LLM providers. You can switch between them at runtime using the config overlay (<kbd>Ctrl+N</kbd>).</p>

            <table>
                <thead><tr><th>Provider</th><th>Models</th><th>Notes</th></tr></thead>
                <tbody>
                    <tr><td><strong>Anthropic</strong></td><td>Claude Sonnet 4, Claude Sonnet 3.5, Claude Haiku 3.5</td><td>Primary supported provider</td></tr>
                    <tr><td><strong>Claude Code</strong></td><td>Claude Sonnet 4, Claude Opus 4</td><td>Uses Claude Code OAuth credentials</td></tr>
                    <tr><td><strong>DeepSeek</strong></td><td>DeepSeek Chat, DeepSeek Reasoner</td><td>Reasoning model support</td></tr>
                    <tr><td><strong>Grok</strong></td><td>Grok 3, Grok 3 Mini</td><td>xAI provider</td></tr>
                    <tr><td><strong>Groq</strong></td><td>Llama, Mixtral, Gemma variants</td><td>Fast inference, some models have built-in tools</td></tr>
                </tbody>
            </table>

            <h3>Switching providers</h3>
            <p>Press <kbd>Ctrl+N</kbd> to open the config overlay. Use <kbd>←</kbd> / <kbd>→</kbd> to cycle through providers and models. The change takes effect on the next message.</p>

            <h2 id="env">Environment Variables</h2>
            <p>Set these in a <code>.env</code> file in your project directory, or export them in your shell:</p>

            <table>
                <thead><tr><th>Variable</th><th>Provider</th><th>Required</th></tr></thead>
                <tbody>
                    <tr><td><code>ANTHROPIC_API_KEY</code></td><td>Anthropic</td><td>For Anthropic provider</td></tr>
                    <tr><td><code>OPENAI_API_KEY</code></td><td>OpenAI-compat</td><td>For OpenAI-compatible providers</td></tr>
                    <tr><td><code>DEEPSEEK_API_KEY</code></td><td>DeepSeek</td><td>For DeepSeek</td></tr>
                    <tr><td><code>XAI_API_KEY</code></td><td>Grok</td><td>For xAI Grok</td></tr>
                    <tr><td><code>GROQ_API_KEY</code></td><td>Groq</td><td>For Groq</td></tr>
                    <tr><td><code>GITHUB_TOKEN</code></td><td>GitHub CLI</td><td>For <code>gh_execute</code> tool</td></tr>
                </tbody>
            </table>

            <div class="info-box note">
                <div class="info-label">Claude Code</div>
                <p>Claude Code uses OAuth credentials from <code>~/.claude/.credentials.json</code> — no API key needed. Requires a Claude Code subscription.</p>
            </div>

            <h2 id="runtime">Runtime Configuration</h2>
            <p>The config overlay (<kbd>Ctrl+N</kbd>) controls these settings:</p>

            <h3>Context budget</h3>
            <ul>
                <li><strong>Budget</strong> — Maximum context window size in tokens (default: 200,000)</li>
                <li><strong>Cleaning threshold</strong> — Token count that triggers automatic conversation compaction (default: 140,000)</li>
                <li><strong>Target proportion</strong> — How much to compact when cleaning (0.0–1.0, lower = more aggressive)</li>
            </ul>

            <h3>Model selection</h3>
            <p>Each provider has multiple models with different capabilities and pricing. The config overlay shows the current provider and model, with <kbd>←</kbd> / <kbd>→</kbd> to cycle.</p>

            <h3>API check</h3>
            <p>The config overlay includes a "Check API" button that tests your current provider configuration — verifying authentication, streaming, and tool support.</p>

            <h2 id="themes">Themes</h2>
            <p>Context Pilot includes multiple color themes. Cycle through them in the config overlay. Themes affect the TUI colors for borders, highlights, status indicators, and syntax highlighting.</p>

            <h2 id="persistence">Persistence</h2>
            <p>All state is persisted to the <code>.context-pilot/</code> directory in your project root:</p>

            <table>
                <thead><tr><th>Path</th><th>Contents</th></tr></thead>
                <tbody>
                    <tr><td><code>config.json</code></td><td>Global config (provider, model, budget, theme)</td></tr>
                    <tr><td><code>states/{worker}.json</code></td><td>Per-worker state (modules, tools, panel configs)</td></tr>
                    <tr><td><code>panels/{uid}.json</code></td><td>Individual panel data</td></tr>
                    <tr><td><code>messages/{uid}.yaml</code></td><td>Conversation messages</td></tr>
                    <tr><td><code>agents/</code></td><td>Custom agent definitions (.md files)</td></tr>
                    <tr><td><code>skills/</code></td><td>Custom skill documents (.md files)</td></tr>
                    <tr><td><code>commands/</code></td><td>Custom command definitions (.md files)</td></tr>
                    <tr><td><code>presets/</code></td><td>Saved preset snapshots (.json files)</td></tr>
                </tbody>
            </table>

            <div class="info-box tip">
                <div class="info-label">Tip</div>
                <p>Add <code>.context-pilot/</code> to your <code>.gitignore</code>. It contains session-specific state that shouldn't be committed.</p>
            </div>

            <h3>Background persistence</h3>
            <p>State is saved asynchronously via a background writer thread with 50ms debounce. Multiple rapid saves are coalesced into a single write. A synchronous flush runs on clean exit to prevent data loss.</p>

            <div class="page-nav">
                <a href="agents.html">
                    <span class="nav-label">Previous</span>
                    <span class="nav-title">← Agents & Skills</span>
                </a>
                <a href="keyboard.html" class="next">
                    <span class="nav-label">Next</span>
                    <span class="nav-title">Keyboard Shortcuts →</span>
                </a>
            </div>
        </main>
    </div>

    <script>
    function toggleSidebar() {
        document.querySelector('.docs-sidebar').classList.toggle('open');
        document.querySelector('.docs-overlay').classList.toggle('open');
    }
    </script>
</body>
</html>
